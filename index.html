<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Новостной портал (одностраничный)</title>
    <style>
        /* ... стили без изменений (те же, что были) ... */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        header {
            background-color: #005f73;
            color: white;
            padding: 20px;
            text-align: center;
        }
        nav {
            background-color: #0a9396;
            padding: 10px;
        }
        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 0;
            padding: 0;
        }
        nav a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
        }
        nav a:hover {
            text-decoration: underline;
        }
        main {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            min-height: 60vh;
        }
        h1, h2, h3 {
            color: #005f73;
        }
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        .news-item {
            background-color: #e9d8a6;
            padding: 15px;
            border-radius: 8px;
            transition: transform 0.2s;
        }
        .news-item:hover {
            transform: scale(1.02);
        }
        .news-item h3 {
            margin-top: 0;
        }
        .category-badge {
            background-color: #005f73;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            display: inline-block;
        }
        .news-list article {
            border-bottom: 1px solid #ccc;
            padding: 15px 0;
        }
        .news-list article:last-child {
            border-bottom: none;
        }
        .full-article .meta {
            color: #666;
            font-style: italic;
        }
        .article-content p {
            line-height: 1.6;
        }
        footer {
            background-color: #005f73;
            color: white;
            text-align: center;
            padding: 10px;
            margin-top: 20px;
        }
        a {
            color: #005f73;
            cursor: pointer;
        }
        a:hover {
            color: #0a9396;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
        }
    </style>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function(m,e,t,r,i,k,a){
            m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
        })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=106838887', 'ym');

        ym(106838887, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", referrer: document.referrer, url: location.href, accurateTrackBounce:true, trackLinks:true});
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/106838887" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
</head>
<body>
    <header>
        <h1>Новостной портал</h1>
        <p>Все новости в одном месте</p>
    </header>
    <nav>
        <ul>
            <li><a data-link="/">Главная</a></li>
            <li><a data-link="/category/politics">Политика</a></li>
            <li><a data-link="/category/sport">Спорт</a></li>
            <li><a data-link="/category/tech">Технологии</a></li>
            <li><a data-link="/category/science">Наука</a></li>
            <li><a data-link="/category/culture">Культура</a></li>
        </ul>
    </nav>
    <main id="content">
        <!-- Сюда будет подставляться контент -->
    </main>
    <footer>
        <p>&copy; 2025 Новостной портал. Учебный проект.</p>
    </footer>

    <script>
        (function() {
            // ===== Данные сайта (те же, что и раньше, с полными текстами) =====
            const categories = [
                { id: 'politics', name: 'Политика' },
                { id: 'sport', name: 'Спорт' },
                { id: 'tech', name: 'Технологии' },
                { id: 'science', name: 'Наука' },
                { id: 'culture', name: 'Культура' }
            ];

            const articles = [
                // Политика
                { 
                    id: 'politics1', 
                    title: 'Госдума приняла закон о цифровом рубле', 
                    category: 'politics', 
                    date: '10 февраля 2025', 
                    content: '<p>Государственная дума в третьем чтении приняла закон о внедрении цифрового рубля. Новая форма национальной валюты будет выпускаться Банком России и станет дополнением к наличным и безналичным деньгам. Ожидается, что первые операции с цифровым рублем начнутся уже в апреле. Эксперты отмечают, что это повысит прозрачность финансовых потоков и снизит издержки на переводы. Граждане смогут открывать цифровые кошельки через мобильные приложения банков.</p>' 
                },
                { 
                    id: 'politics2', 
                    title: 'Совет Федерации одобрил поправки в налоговый кодекс', 
                    category: 'politics', 
                    date: '9 февраля 2025', 
                    content: '<p>Совет Федерации одобрил пакет поправок в Налоговый кодекс, касающихся поддержки малого и среднего бизнеса. Ставка страховых взносов для МСП снижается с 15% до 7,6% при превышении минимального размера оплаты труда. Кроме того, расширяется перечень расходов, учитываемых при расчете налога на прибыль. Сенаторы подчеркнули, что меры направлены на стимулирование предпринимательской активности в условиях импортозамещения. Закон вступит в силу с 1 марта.</p>' 
                },
                // Спорт
                { 
                    id: 'sport1', 
                    title: 'Сборная России по футболу обыграла Иран в товарищеском матче', 
                    category: 'sport', 
                    date: '10 февраля 2025', 
                    content: '<p>В товарищеском матче, прошедшем на стадионе «ВТБ Арена» в Москве, сборная России одержала победу над командой Ирана со счётом 2:1. Первый тайм завершился без голов, но во втором наши футболисты активизировались: на 53-й минуте отличился Артём Дзюба, а на 78-й — Алексей Миранчук. Иранцам удалось забить гол престижа уже в компенсированное время. Главный тренер Валерий Карпин остался доволен действиями команды и назвал матч полезным этапом подготовки к отборочным играм.</p>' 
                },
                { 
                    id: 'sport2', 
                    title: 'Российские хоккеисты вышли в финал Кубка Первого канала', 
                    category: 'sport', 
                    date: '9 февраля 2025', 
                    content: '<p>Сборная России по хоккею разгромила команду Казахстана со счётом 5:1 в полуфинале Кубка Первого канала. Шайбы забросили Никита Гусев (дубль), Михаил Григоренко, Павел Бучневич и Александр Никишин. Голкипер Иван Федотов отразил 32 броска из 33. В финале россияне встретятся со сборной Беларуси, которая ранее оказалась сильнее Чехии. Матч за титул состоится 12 февраля в Санкт-Петербурге.</p>' 
                },
                // Технологии
                { 
                    id: 'tech1', 
                    title: 'Яндекс представил новую нейросеть YandexGPT 3', 
                    category: 'tech', 
                    date: '10 февраля 2025', 
                    content: '<p>Компания Яндекс анонсировала третью версию своей языковой модели YandexGPT. Нейросеть стала лучше понимать контекст диалога и генерировать более связные ответы на русском языке. Разработчики утверждают, что модель прошла обучение на расширенном корпусе текстов и теперь способна писать код, сочинять стихи и давать развёрнутые советы. Новая версия уже интегрирована в виртуального помощника Алису и доступна в бета-версии для всех пользователей.</p>' 
                },
                { 
                    id: 'tech2', 
                    title: 'В России создали квантовый процессор с 50 кубитами', 
                    category: 'tech', 
                    date: '8 февраля 2025', 
                    content: '<p>Учёные из Российского квантового центра и Физического института имени Лебедева представили прототип 50-кубитного квантового процессора. Это рекордный показатель для отечественных разработок. Процессор работает на сверхпроводниковых элементах и охлаждается до температур, близких к абсолютному нулю. Разработка открывает путь к созданию мощных квантовых компьютеров, способных решать задачи, непосильные для классических машин. Планируется, что уже через год количество кубитов будет увеличено до ста.</p>' 
                },
                // Наука
                { 
                    id: 'science1', 
                    title: 'Астрономы открыли новую экзопланету в зоне обитаемости', 
                    category: 'science', 
                    date: '10 февраля 2025', 
                    content: '<p>Международная группа астрономов обнаружила экзопланету TOI-1233 c, которая находится в обитаемой зоне своей звезды — красного карлика в 120 световых годах от Земли. Планета по размерам близка к Земле и получает достаточно тепла для существования жидкой воды. Учёные планируют с помощью телескопа «Джеймс Уэбб» изучить состав её атмосферы. Открытие приближает нас к ответу на вопрос о том, одиноки ли мы во Вселенной.</p>' 
                },
                { 
                    id: 'science2', 
                    title: 'Генетики расшифровали ДНК древнего бизона, жившего 30 тысяч лет назад', 
                    category: 'science', 
                    date: '7 февраля 2025', 
                    content: '<p>Российские учёные совместно с коллегами из Южной Кореи полностью расшифровали геном степного бизона, останки которого нашли в вечной мерзлоте Якутии. Возраст находки — около 30 тысяч лет. Анализ ДНК показал, что древние бизоны обладали генетическим разнообразием, которое позволило им адаптироваться к суровым условиям ледникового периода. Исследование поможет лучше понять эволюцию этого вида и причины его вымирания.</p>' 
                },
                // Культура
                { 
                    id: 'culture1', 
                    title: 'В Третьяковской галерее открылась выставка картин Репина', 
                    category: 'culture', 
                    date: '10 февраля 2025', 
                    content: '<p>В Третьяковской галерее на Крымском Валу стартовала выставка «Илья Репин. Мастер портрета», приуроченная к 180-летию со дня рождения художника. Экспозиция включает более 150 работ из музеев России и Беларуси, включая знаменитые «Бурлаки на Волге», «Не ждали» и «Иван Грозный и сын его Иван». Впервые в Москве показаны малоизвестные рисунки и этюды из частных собраний. Выставка продлится до конца мая.</p>' 
                },
                { 
                    id: 'culture2', 
                    title: 'Большой театр представил премьеру балета «Щелкунчик» в новой постановке', 
                    category: 'culture', 
                    date: '6 февраля 2025', 
                    content: '<p>На исторической сцене Большого театра с аншлагом прошла премьера балета Чайковского «Щелкунчик» в хореографии молодого постановщика Вячеслава Самодурова. Это современное прочтение классики: действие перенесено в наши дни, а сценография выполнена с использованием видеопроекций. Партии исполнили ведущие солисты театра. Зрители и критики отмечают свежесть и динамичность спектакля, который при этом сохраняет верность музыке Чайковского.</p>' 
                }
            ];

            // ===== Определяем базовый путь =====
            function getBasePath() {
                let path = window.location.pathname;
                // Если это файл index.html (или просто каталог), удаляем имя файла
                if (path.endsWith('/')) return path;
                const parts = path.split('/');
                if (parts[parts.length-1].includes('.html')) {
                    parts.pop(); // удаляем имя файла
                    return parts.join('/') + '/';
                }
                // Если путь не заканчивается слешем и не содержит .html, считаем, что это каталог
                return path + (path.endsWith('/') ? '' : '/');
            }

            const BASE_PATH = getBasePath();

            // ===== Вспомогательные функции =====
            function getCategoryName(categoryId) {
                const cat = categories.find(c => c.id === categoryId);
                return cat ? cat.name : categoryId;
            }

            // ===== Функции отрисовки страниц =====
            function renderHome() {
                const latest = articles.slice(0, 5);
                let html = '<section class="latest-news"><h2>Последние новости</h2><div class="news-grid">';
                latest.forEach(article => {
                    html += `
                        <div class="news-item">
                            <h3><a data-link="/article/${article.id}">${article.title}</a></h3>
                            <p>${article.content.replace(/<[^>]+>/g, '').substring(0, 100)}...</p>
                            <span class="category-badge">${getCategoryName(article.category)}</span>
                        </div>
                    `;
                });
                html += '</div></section>';
                document.getElementById('content').innerHTML = html;
            }

            function renderCategory(categoryId) {
                const catName = getCategoryName(categoryId);
                const catArticles = articles.filter(a => a.category === categoryId);
                let html = `<h2>Новости ${catName}</h2><div class="news-list">`;
                if (catArticles.length === 0) {
                    html += '<p>Новостей в этой категории пока нет.</p>';
                } else {
                    catArticles.forEach(article => {
                        html += `
                            <article>
                                <h3><a data-link="/article/${article.id}">${article.title}</a></h3>
                                <p>${article.content.replace(/<[^>]+>/g, '').substring(0, 150)}...</p>
                                <small>${article.date}</small>
                            </article>
                        `;
                    });
                }
                html += '</div><p><a data-link="/">Вернуться на главную</a></p>';
                document.getElementById('content').innerHTML = html;
            }

            function renderArticle(articleId) {
                const article = articles.find(a => a.id === articleId);
                if (!article) {
                    document.getElementById('content').innerHTML = '<h2>Статья не найдена</h2><p><a data-link="/">Вернуться на главную</a></p>';
                    return;
                }
                const catName = getCategoryName(article.category);
                const html = `
                    <article class="full-article">
                        <h2>${article.title}</h2>
                        <p class="meta">Категория: <a data-link="/category/${article.category}">${catName}</a> | Дата: ${article.date}</p>
                        <div class="article-content">${article.content}</div>
                        <p><a data-link="/category/${article.category}">← Назад к ${catName}</a> | <a data-link="/">На главную</a></p>
                    </article>
                `;
                document.getElementById('content').innerHTML = html;
            }

            // ===== Роутер с учётом базового пути =====
            function router() {
                // Получаем путь относительно корня сайта
                let fullPath = window.location.pathname;
                let relativePath = fullPath.startsWith(BASE_PATH) 
                    ? fullPath.slice(BASE_PATH.length - 1) // оставляем начальный слеш
                    : fullPath;
                // Убираем ведущий слеш для удобства сравнения
                if (relativePath.startsWith('/')) {
                    relativePath = relativePath.slice(1);
                }
                // Убираем пустые хвосты
                if (relativePath === '') relativePath = '/';

                // Сопоставляем с маршрутами
                if (relativePath === '/' || relativePath === 'index.html') {
                    renderHome();
                } else if (relativePath.startsWith('category/')) {
                    const categoryId = relativePath.replace('category/', '');
                    renderCategory(categoryId);
                } else if (relativePath.startsWith('article/')) {
                    const articleId = relativePath.replace('article/', '');
                    renderArticle(articleId);
                } else {
                    document.getElementById('content').innerHTML = '<h2>404 - Страница не найдена</h2><p><a data-link="/">Вернуться на главную</a></p>';
                }

                // Отправляем виртуальный просмотр в Яндекс.Метрику
                if (typeof ym !== 'undefined') {
                    ym(106838887, 'hit', window.location.pathname);
                }
            }

            // ===== Обработка кликов =====
            function handleLinkClick(e) {
                const link = e.target.closest('a[data-link]');
                if (!link) return;

                e.preventDefault();
                const targetPath = link.getAttribute('data-link'); // начинается с /
                // Формируем новый абсолютный URL с учётом базового пути
                const newUrl = BASE_PATH + targetPath.slice(1); // убираем начальный слеш у targetPath
                history.pushState(null, '', newUrl);
                router(); // вызываем роутер для обновления контента
            }

            // ===== Обработка кнопок назад/вперёд =====
            window.addEventListener('popstate', router);

            // ===== Инициализация =====
            document.addEventListener('DOMContentLoaded', function() {
                document.body.addEventListener('click', handleLinkClick);
                router();
            });
        })();
    </script>
</body>

</html>
